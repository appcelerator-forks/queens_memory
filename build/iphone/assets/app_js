var Alloy=require("/alloy"),_=Alloy._,Backbone=Alloy.Backbone,moment=require("alloy/moment");Alloy.Globals.DigitalForm,Alloy.Globals.ScanForm,Alloy.Globals.OralForm,Alloy.Globals.WildSoundForm,Alloy.Globals.isIOS7Plus=parseInt(Ti.Platform.version.split(".")[0])>=7,Alloy.Globals.isAndroid4=!1,Alloy.Globals.iPhone6P="@3x"===Ti.Platform.displayCaps.logicalDensityFactor,Alloy.Globals.displayWifiSettingsAlert=function(e,t,n,i){if(Ti.API.debug("in displayWifiSettingsAlert: "+Titanium.Network.online),Alloy.Globals.wifiAlertDisplayed||Titanium.Network.online)return void(e&&e());Alloy.Globals.wifiAlertDisplayed=!0;var s=["WiFi Settings","Cancel"],r=Ti.UI.createAlertDialog({title:n||"No Network Detected",message:i||"You are currently offline. We strongly recommend Wi-Fi or broadband- quality connections for uploading. Do you want to check your Wifi settings?",buttonNames:t?t:s});r.addEventListener("click",function(e){var t=require("com.kaztopia.settingslauncher");t.launchSettingsWithPath("root=WIFI"),Alloy.Globals.wifiAlertDisplayed=!1}),r.show()},Alloy.Globals.countDown=function(e,t,n,i){return{total_sec:60*e+t,timer:this.timer,set:function(e,t){return this.total_sec=60*parseInt(e)+parseInt(t),this.time={m:e,s:t},this},start:function(){var e=this;return this.timer=setInterval(function(){e.total_sec?(e.total_sec--,e.time={m:parseInt(e.total_sec/60),s:e.total_sec%60},n()):(e.stop(),i())},1e3),this},stop:function(){return clearInterval(this.timer),this.time={m:0,s:0},this.total_sec=0,this}}},Alloy.Globals.rotateAndResize=function(e,t,n){var i=require("com.jreyes.imagerotatecorrection"),s=Ti.Filesystem.getApplicationDataDirectory(),r=String.format("QPL_Photo_%s.jpg",moment().format("YYYY-MM-DD-HH-mm-ss-SSS-ZZ")),a=Ti.Filesystem.getFile(s,r),o=a.nativePath;return a.write(e),a=null,i.rotateResizeImage(o,t||640,n||80),e=Ti.Filesystem.getFile(o)},Alloy.Globals.base64Check=function(e){return!!Ti.Utils.base64encode(e).toString()&&(Ti.API.info("Image check passed."),!0)},Ti.App.addEventListener("close",function(e){Ti.App.Properties.setBool("AlertPOST",!1);!!Ti.App.Properties.getBool("Remember Me");checkRN||(Ti.App.Properties.setString("First Name",$.fText.value),Ti.App.Properties.setString("Last Name",$.lText.value),Ti.App.Properties.setString("Email Address",$.emailA.value),Ti.App.Properties.setBool("Remember Me",!1))}),Alloy.createController("index");