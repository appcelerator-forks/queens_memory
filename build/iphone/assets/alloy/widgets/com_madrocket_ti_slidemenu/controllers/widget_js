function WPATH(e){var t=e.lastIndexOf("/"),i=t===-1?"com.madrocket.ti.slidemenu/"+e:e.substring(0,t)+"/com.madrocket.ti.slidemenu/"+e.substring(t+1);return 0!==i.indexOf("/")?"/"+i:i}function __processArg(e,t){var i=null;return e&&(i=e[t]||null,delete e[t]),i}function Controller(){new(require("/alloy/widget"))("com.madrocket.ti.slidemenu");if(this.__widgetId="com.madrocket.ti.slidemenu",require("/alloy/controllers/BaseController").apply(this,Array.prototype.slice.call(arguments)),this.__controllerPath="widget",this.args=arguments[0]||{},arguments[0]){__processArg(arguments[0],"__parentSymbol"),__processArg(arguments[0],"$model"),__processArg(arguments[0],"__itemTemplate")}var e=this,t={};e.__views.slideMenu=Ti.UI.createView({id:"slideMenu"}),e.__views.slideMenu&&e.addTopLevelView(e.__views.slideMenu),e.__views.leftDrawer=Ti.UI.createView({id:"leftDrawer",top:0,left:0,zIndex:1}),e.__views.slideMenu.add(e.__views.leftDrawer),e.__views.content=Ti.UI.createView({id:"content",top:0,left:0,zIndex:10}),e.__views.slideMenu.add(e.__views.content),e.__views.rightDrawer=Ti.UI.createView({id:"rightDrawer",top:0,right:0,zIndex:1}),e.__views.slideMenu.add(e.__views.rightDrawer),t.destroy=function(){},_.extend(e,e.__views);var i={is_opened:!1,initialize:function(e){this.setWidth(e.width),this.add(e)},openDrawer:function(){this.fireEvent("open"),e.content.animate(this.getDrawerOpenAnimation()),this.is_opened=!0,console.log("in widget.js, open drawer")},closeDrawer:function(){this.fireEvent("close"),e.content.animate(this.getDrawerCloseAnimation()),this.is_opened=!1,console.log("in widget.js, close  drawer")},toggleDrawer:function(){this.is_opened?this.closeDrawer():this.openDrawer()}};_.extend(e.leftDrawer,i,{getDrawerOpenAnimation:function(){var e=this.width;return Ti.UI.createAnimation({left:e,curve:Ti.UI.ANIMATION_CURVE_EASE_OUT,duration:150})},getDrawerCloseAnimation:function(){return Ti.UI.createAnimation({left:0,curve:Ti.UI.ANIMATION_CURVE_EASE_OUT,duration:150})}}),_.extend(e.rightDrawer,i,{getDrawerOpenAnimation:function(){var e=this.width;return Ti.UI.createAnimation({right:e,curve:Ti.UI.ANIMATION_CURVE_EASE_OUT,duration:150})},getDrawerCloseAnimation:function(){return Ti.UI.createAnimation({right:0,curve:Ti.UI.ANIMATION_CURVE_EASE_OUT,duration:150})}});var o=0,r=!1;e.content.addEventListener("touchstart",function(e){o=parseInt(e.x,10),r=!0}),e.content.addEventListener("touchend",function(t){r=!1;var i=(t.source.convertPointToView({x:t.x,y:t.y},e.slideMenu),parseInt(t.x,10)),n=i-o;return 0!=n&&void(e.content.left>0?(n>10?e.leftDrawer.openDrawer():e.leftDrawer.closeDrawer(),n<-5?e.leftDrawer.closeDrawer():e.leftDrawer.openDrawer()):(n>5?e.rightDrawer.closeDrawer():e.rightDrawer.openDrawer(),n<-10?e.rightDrawer.openDrawer():e.rightDrawer.closeDrawer()))}),e.content.addEventListener("touchmove",function(t){var i=t.source.convertPointToView({x:t.x,y:t.y},e.slideMenu),n=parseInt(i.x,10),l=n-o,a=l>0,s=l<0;r&&(a?(e.leftDrawer.zIndex=2,e.rightDrawer.zIndex=1):(e.leftDrawer.zIndex=1,e.rightDrawer.zIndex=2),(a&&l<=e.leftDrawer.width||s&&l>=-e.rightDrawer.width)&&(e.content.left=l)),l>10&&(r=!0)}),e.leftDrawer.addEventListener("open",function(){e.rightDrawer.is_opened=!1,e.leftDrawer.zIndex=2,e.rightDrawer.zIndex=1,e.trigger("open:[left]")}),e.leftDrawer.addEventListener("close",function(){e.trigger("close:[left]")}),e.rightDrawer.addEventListener("open",function(){e.leftDrawer.is_opened=!1,e.leftDrawer.zIndex=1,e.rightDrawer.zIndex=2,e.trigger("open:[right]")}),e.rightDrawer.addEventListener("close",function(){e.trigger("close:[right]")}),t.init=function(t){t.hasOwnProperty("leftDrawer")?e.leftDrawer.initialize(t.leftDrawer):e.slideMenu.remove(e.leftDrawer),t.hasOwnProperty("rightDrawer")?e.rightDrawer.initialize(t.rightDrawer):e.slideMenu.remove(e.rightDrawer),e.content.add(t.content)},t.toggleRightDrawer=function(){e.rightDrawer.toggleDrawer()},t.toggleLeftDrawer=function(){e.leftDrawer.toggleDrawer()},_.extend(e,t)}var Alloy=require("/alloy"),Backbone=Alloy.Backbone,_=Alloy._;module.exports=Controller;