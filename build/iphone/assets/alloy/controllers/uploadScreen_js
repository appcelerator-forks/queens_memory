function __processArg(e,t){var i=null;return e&&(i=e[t]||null,delete e[t]),i}function Controller(){function e(e){var t=Alloy.createController("digitalPhotoForm").getView();t.open(),t=null}function t(e){var t=Alloy.createController("scanItemForm").getView();t.open(),t=null}function i(e){var t=Alloy.createController("oralHistoryForm").getView();t.open(),t=null}function o(e){var t=Alloy.createController("wildSoundForm").getView();t.open(),t=null}function r(e){var t={alertStatus:h,messages:c},i=Alloy.createController("systemAlert",t).getView();i.open(),i=null}function n(e){l.uploadWin.close()}function a(e){if(!Ti.Network.getOnline())return void Alloy.Globals.displayWifiSettingsAlert();var t=Ti.Network.createHTTPClient({timeout:6e4});t.open("GET","https://uploadapi.queenslibrary.org:8081/api/v1/valets/mobile_status"),t.onerror=function(t){e&&e({success:!1,error:t}),console.log("onError!!")},t.onload=function(i){console.info(this.status),console.info(this.readyState),console.info(this.responseText),e&&e({success:!0,response:t.responseText}),console.log("onLoad Success!!")},Ti.API.info("onLoad and onError functions set....."),Ti.API.info("Sending....."+t.location),t.send()}if(require("/alloy/controllers/BaseController").apply(this,Array.prototype.slice.call(arguments)),this.__controllerPath="uploadScreen",this.args=arguments[0]||{},arguments[0]){__processArg(arguments[0],"__parentSymbol"),__processArg(arguments[0],"$model"),__processArg(arguments[0],"__itemTemplate")}var l=this,s={},d={};l.__views.uploadWin=Ti.UI.createWindow({orientationModes:[Ti.UI.PORTRAIT],title:"Upload Screen",id:"uploadWin",theme:"mytheme"}),l.__views.uploadWin&&l.addTopLevelView(l.__views.uploadWin),l.__views.menu=Alloy.createWidget("com.madrocket.ti.slidemenu","widget",{id:"menu",__parentSymbol:l.__views.uploadWin}),l.__views.menu.setParent(l.__views.uploadWin),l.__views.uploadView=Ti.UI.createView({backgroundColor:"#B00000",height:Titanium.UI.FILL,transition:Ti.UI.iOS.AnimationStyle.FLIP_FROM_LEFT,id:"uploadView"}),l.__views.uploadWin.add(l.__views.uploadView),l.__views.banner2=Ti.UI.createView({top:"3%",width:"100%",zIndex:1,font:{fontSize:14},height:"4%",id:"banner2"}),l.__views.uploadView.add(l.__views.banner2),l.__views.back=Ti.UI.createButton({width:"12%",backgroundColor:"transparent",borderRadius:5,color:"white",font:{fontFamily:"queensfoundationfont",fontSize:35,top:"0%"},left:"5%",borderColor:"transparent",title:"T",id:"back"}),l.__views.banner2.add(l.__views.back),n?l.addListener(l.__views.back,"click",n):d["$.__views.back!click!backButton"]=!0,l.__views.qpl=Ti.UI.createImageView({width:"33%",top:"11%",id:"qpl",image:"/images/QL300.png"}),l.__views.banner2.add(l.__views.qpl),l.__views.Title=Ti.UI.createLabel({font:{fontFamily:"Montserrat-Regular"},textAlign:Titanium.UI.TEXT_ALIGNMENT_CENTER,vsible:!1,id:"Title"}),l.__views.uploadView.add(l.__views.Title),l.__views.QMW=Ti.UI.createImageView({width:"35%",top:"10%",id:"QMW",image:"QMW-ink.png"}),l.__views.uploadView.add(l.__views.QMW),l.__views.help=Ti.UI.createLabel({font:{fontFamily:"Montserrat-Regular",fontSize:12},textAlign:Titanium.UI.TEXT_ALIGNMENT_CENTER,top:"25%",right:"7%",left:"10%",text:"Help us document! We welcome your contributions to the Archives and look forward to adding your donations to our online collections.",id:"help"}),l.__views.uploadView.add(l.__views.help),l.__views.choose=Ti.UI.createLabel({font:{fontFamily:"Montserrat-Regular",fontWeight:"bold",fontSize:16},textAlign:Titanium.UI.TEXT_ALIGNMENT_CENTER,right:"7%",left:"7%",top:"40%",text:"Choose the type of item you are sharing with App",id:"choose"}),l.__views.uploadView.add(l.__views.choose),l.__views.photo=Ti.UI.createButton({width:"70%",backgroundColor:"#f2f2f2",borderRadius:5,color:"black",font:{fontFamily:"Montserrat-Regular"},top:"53%",borderColor:"gray",height:"5%",title:"DIGITAL PHOTOGRAPH",id:"photo"}),l.__views.uploadView.add(l.__views.photo),e?l.addListener(l.__views.photo,"click",e):d["$.__views.photo!click!photoSubmit"]=!0,l.__views.scan=Ti.UI.createButton({width:"70%",backgroundColor:"#f2f2f2",borderRadius:5,color:"black",font:{fontFamily:"Montserrat-Regular"},top:"60%",borderColor:"gray",height:"5%",title:"SCANNED ITEM",id:"scan"}),l.__views.uploadView.add(l.__views.scan),t?l.addListener(l.__views.scan,"click",t):d["$.__views.scan!click!scanSubmit"]=!0,l.__views.oral=Ti.UI.createButton({width:"70%",backgroundColor:"#f2f2f2",borderRadius:5,color:"black",font:{fontFamily:"Montserrat-Regular"},top:"67%",borderColor:"gray",height:"5%",title:"ORAL HISTORY INTERVIEW",id:"oral"}),l.__views.uploadView.add(l.__views.oral),i?l.addListener(l.__views.oral,"click",i):d["$.__views.oral!click!oralHistSubmit"]=!0,l.__views.sound=Ti.UI.createButton({width:"70%",backgroundColor:"#f2f2f2",borderRadius:5,color:"black",font:{fontFamily:"Montserrat-Regular"},top:"74%",borderColor:"gray",height:"5%",title:"WILD SOUND RECORDING",id:"sound"}),l.__views.uploadView.add(l.__views.sound),o?l.addListener(l.__views.sound,"click",o):d["$.__views.sound!click!soundSubmit"]=!0,l.__views.alerts=Ti.UI.createButton({width:"40%",backgroundColor:"black",borderRadius:5,color:"white",font:{fontFamily:"Montserrat-Regular"},bottom:"10%",height:"5%",title:"System Alerts",id:"alerts"}),l.__views.uploadView.add(l.__views.alerts),r?l.addListener(l.__views.alerts,"click",r):d["$.__views.alerts!click!systemSubmit"]=!0,s.destroy=function(){},_.extend(l,l.__views);var h,c=(arguments[0]||{},[]);l.alerts.visible=!1,l.qpl.image="QL300.png",l.QMW.image="QMW-ink.png",l.oral.visible=!1,l.sound.visible=!1;var u=function(e){if(e.success&&e.response.length>0){Ti.API.debug("Sent: "+JSON.stringify(e.response,null,2));var t=JSON.parse(e.response),i=t.messages,o="",r="";c.push({title:o,body:r});for(var n=0;n<i.length;n++){var o=JSON.stringify(i[n].title),r=JSON.stringify(i[n].body);o=o.replace(/"/g,""),r=r.replace(/"/g,""),c.push({title:o,body:r})}c.length>0&&(l.alerts.visible=!0)}else Ti.API.debug("Something went wrong. Please try to submit again. \n")};a(u),d["$.__views.back!click!backButton"]&&l.addListener(l.__views.back,"click",n),d["$.__views.photo!click!photoSubmit"]&&l.addListener(l.__views.photo,"click",e),d["$.__views.scan!click!scanSubmit"]&&l.addListener(l.__views.scan,"click",t),d["$.__views.oral!click!oralHistSubmit"]&&l.addListener(l.__views.oral,"click",i),d["$.__views.sound!click!soundSubmit"]&&l.addListener(l.__views.sound,"click",o),d["$.__views.alerts!click!systemSubmit"]&&l.addListener(l.__views.alerts,"click",r),_.extend(l,s)}var Alloy=require("/alloy"),Backbone=Alloy.Backbone,_=Alloy._;module.exports=Controller;